{
  "schema": "agent-kernel/LevelStrategyFixture",
  "schemaVersion": 1,
  "cases": [
    {
      "name": "directive overrides tags",
      "input": {
        "levelGen": { "width": 5, "height": 5 },
        "plan": {
          "theme": { "tags": ["rooms:compact"] },
          "directives": { "roomStrategy": "expansive" }
        }
      },
      "expected": {
        "applied": "rooms:expansive",
        "source": "directive",
        "value": {
          "width": 5,
          "height": 5,
          "shape": { "roomCount": 3, "roomMinSize": 6, "roomMaxSize": 14, "corridorWidth": 2 }
        }
      }
    },
    {
      "name": "tags apply when shape missing",
      "input": {
        "levelGen": { "width": 6, "height": 6 },
        "plan": { "theme": { "tags": ["rooms:compact"] } }
      },
      "expected": {
        "applied": "rooms:compact",
        "source": "tag",
        "value": {
          "width": 6,
          "height": 6,
          "shape": { "roomCount": 6, "roomMinSize": 3, "roomMaxSize": 6, "corridorWidth": 1 }
        }
      }
    },
    {
      "name": "explicit shape wins over strategy",
      "input": {
        "levelGen": { "width": 7, "height": 7, "shape": { "roomCount": 9, "corridorWidth": 3 } },
        "plan": { "theme": { "tags": ["rooms:compact"] } }
      },
      "expected": {
        "applied": "rooms:compact",
        "source": "tag",
        "value": {
          "width": 7,
          "height": 7,
          "shape": { "roomCount": 9, "corridorWidth": 3, "roomMinSize": 3, "roomMaxSize": 6 }
        }
      }
    }
  ]
}
